<!DOCTYPE html>
<html lang="en" manifest="cache.appcache">
	<head>
		<meta charset="utf-8">
		<title>OneDictionary</title>
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black">

		<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<link rel="stylesheet" href="style.css">

		<script>
			if((navigator.userAgent.match(/iPad|iPhone/i))){document.styleSheets[0].insertRule(".scrollable{overflow:auto; overflow-x: hidden; -webkit-overflow-scrolling:touch;}", 2);}
		</script>

	</head>

	<body>
		
		<main>
			<div class="fullscreen">
				<h1>OneDictionary</h1>
				<h4>One website to rule them all</h4>
				<input id="search" type="text" placeholder="Enter a word" autofocus="autofocus" autocorrect="off" autocapitalize="off" onfocus="this.value=''" onkeydown="inputenter(event, this.value)" />
			</div>

			<ul id="autolist"></ul>

			<div class="arrow" onclick="togglenav()"></div>

			<nav>
				<div class="btn selected" id="oxfo" onclick="btnclk(this)">Oxford Dictionaries</div>
				<div class="btn" id="dict" onclick="btnclk(this)">Dictionary.com</div>
				<div class="btn" id="macm" onclick="btnclk(this)">Macmillan Dictionary</div>
				<div class="btn" id="thes" onclick="btnclk(this)">Thesaurus.com</div>
				<div class="btn" id="ozdi" onclick="btnclk(this)">Ozdic.com</div>

				<div class="panic" onclick="panic()">PANIC</div>
				<p>Choose a website</p>
			</nav>
		</main>

		<div class="scrollable"><iframe id="frm" src=""></iframe></div>

		<script src="list.js" async></script>
		<script src="complete.js" async></script>
		<script type="text/javascript">
			var firstTime=true;

			function inputenter(e, searchvalue) {
				if (e.keyCode==13) {
					var a=document.getElementsByClassName("liselected")[0];
					if(a){
						document.getElementById("search").value = a.innerHTML;
					}
					ul.style.display="none";
					ul.innerHTML="";

					document.activeElement.blur();
					choosewebsite(searchvalue);

					if(firstTime){
						firstTimeHide();
					}
				}
			}

			function choosewebsite(searchvalue) {
				var src;
				var siteid = document.getElementsByClassName("selected")[0].id;

				switch(siteid) {
					case "oxfo":
						src = "http://www.oxforddictionaries.com/definition/english/" + searchvalue.replace(' ', '-');break;
					case "dict":
						src = "http://dictionary.reference.com/browse/" + searchvalue + "#source-luna";break;
					case "macm":
						src = "http://www.macmillandictionary.com/dictionary/british/" + searchvalue.replace(' ', '-') + "#headword";break;
					case "thes":
						src = "http://www.thesaurus.com/browse/" + searchvalue + "#headword-star";break;
					case "ozdi":
						src = "http://www.ozdic.com/collocation-dictionary/" + searchvalue;break;
					default:
				}
				document.getElementById('frm').src = src;
			}

			function btnclk(selectedbutton) {
				if(document.getElementsByTagName("nav")[0].classList.contains("togglenav")){togglenav();}
				document.getElementsByClassName("selected")[0].className = "btn";
				selectedbutton.className += " selected";
				searchvalue = document.getElementById("search").value;
				choosewebsite(searchvalue);
			}

			function panic() {document.getElementById('frm').src = "http://tureng.com/search/" + document.getElementById("search").value;togglenav();}

			function togglenav() {
				document.getElementsByTagName("nav")[0].classList.toggle("togglenav");
				document.getElementsByClassName("arrow")[0].classList.toggle("on");
			}

			function firstTimeHide(){
				document.getElementsByTagName("h1")[0].style.display = "none";
				document.getElementsByTagName("h4")[0].style.display = "none";
				document.getElementsByClassName("fullscreen")[0].classList.remove("fullscreen");
				if (typeof place == 'function') { 
					place();
				}
				firstTime=false;
			}

		</script>

	</body>

</html>